术语解析:

负载调度器（Load Balancer）:负载调度器能无缝地将网络请求调度到真实服务器上，从而使得服务器集群的结构对客户是透明的，客户访问集群系统提供的网络服务就像访 问一台高性能、高可用的服务器一样。客户程序不受服务器集 群的影响不需作任何修改。系统的伸缩性通过在服务机群中透明地加入和删除一个节点来达到，通过检 测节点或服务进程故障和正确地重置系统达到高可用性。

LVS:  Linux 虚拟服务器(Linux Virtual Server) 负载调度技术在内核中实现。

![](http://linuxvirtualserver.org/zh/lvs1/2.jpg)

# LVS

##  负载均衡技术

* NAT

  通过网络地址转换，调度器重写请求报文的目标地址，根据预设的算法，将请求分派给后端的真实服务器。真实服务器的响应报文通过调度器时，报文的源地址被重写，再返回给客户，完成整个负载调度过程。

* DR

  通过改写请求报文的MAC地址，将请求发送到真实服务器，而真实服务器将响应直接返回给客户。可以极大的提高集群系统的伸缩性。这种方法没有IP隧道的开销，对集群中的真实服务器也没有必须支持IP隧道协议的要求，但是要求调度器与真实服务器都有一块网卡连 在同一物理网段上。 

## LVS集群的特点

### 功能

支持持久的虚拟化服务，并提供详尽的统计数据。能及时将故障屏蔽，实现系统的高可用性。主、从调度器能周期性地进行状态同步，从而实现更高的可用性。

### 适用性

后端服务器可运行任何支持TCP/IP的操作系统，包括Linux，各种Unix（如FreeBSD、Sun Solaris、HP Unix等），Mac/OS和Windows NT/2000等。

负载调度器能够支持绝大多数的TCP和UDP协议：

| 协议 | 内 容                                                        |
| ---- | ------------------------------------------------------------ |
| TCP  | HTTP，FTP，PROXY，SMTP，POP3，IMAP4，DNS，LDAP，HTTPS，SSMTP等 |
| UDP  | DNS，NTP，ICP，视频、音频流播放协议等                        |

# 集群模式

## 主备

